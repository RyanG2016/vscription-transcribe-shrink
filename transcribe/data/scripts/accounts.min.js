var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
$jscomp.findInternal=function(a,c,d){a instanceof String&&(a=String(a));for(var b=a.length,e=0;e<b;e++){var f=a[e];if(c.call(d,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){if(a==Array.prototype||a==Object.prototype)return a;a[c]=d.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,c){var d=$jscomp.propertyToPolyfillSymbol[c];if(null==d)return a[c];d=a[d];return void 0!==d?d:a[c]};
$jscomp.polyfill=function(a,c,d,b){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,c,d,b):$jscomp.polyfillUnisolated(a,c,d,b))};$jscomp.polyfillUnisolated=function(a,c,d,b){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var e=a[b];if(!(e in d))return;d=d[e]}a=a[a.length-1];b=d[a];c=c(b);c!=b&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(a,c,d,b){var e=a.split(".");a=1===e.length;b=e[0];b=!a&&b in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in b))return;b=b[g]}e=e[e.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?b[e]:null;c=c(d);null!=c&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:c}):c!==d&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(b,e,{configurable:!0,writable:!0,value:c})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");(function(a){})(jQuery);
var accountsDT,accountsDTRef,createAcc,createAccModal,createAccForm,createAccBtn,updateAccBtn,modalHeaderTitle,closeAccModal,speakerTypesGlobal,SPEAKER_TYPES_URL="../api/v1/speaker-types/?box_model",API_INSERT_URL="../api/v1/accounts/",CREATE_ACC_HEADER='<i class="fas fa-user-plus"></i>&nbsp;Create New Account',UPDATE_ACC_HEADER='<i class="fas fa-user-edit"></i>&nbsp;Update Account',accName,billableRadioGroup,enabledRadioGroup,acc_retention_time,act_log_retention_time,br1,br2,br3,br4,br5,br1min,br2min,
br3min,br4min,br5min,br1_TAT,br2_TAT,br3_TAT,br4_TAT,br5_TAT,br1type,br2type,br3type,br4type,br5type,br1desc,br2desc,br3desc,br4desc,br5desc,currentID;
$(document).ready(function(){function a(a,b){a=void 0===a?!1:a;b=void 0===b?null:b;var d=new FormData(document.querySelector("#createAccForm"));validateForm()&&(createAccBtn.attr("disabled","disabled"),updateAccBtn.attr("disabled","disabled"),$.ajax({type:a?"PUT":"POST",url:a?API_INSERT_URL+b+"/":API_INSERT_URL,processData:!1,data:convertToSearchParam(d),success:function(a){resetForm();accountsDTRef.ajax.reload();createAccModal.style.display="none";$.confirm({title:"Success",content:a.msg,buttons:{confirm:{btnClass:"btn-green",
action:function(){return!0}}}})},error:function(a){$.confirm({title:"Error",content:a.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",action:function(){createAccBtn.removeAttr("disabled");updateAccBtn.removeAttr("disabled");return!0}}}})}}))}createAccModal=document.getElementById("modal");accountsDT=$("#accounts-tbl");createAcc=$("#createAcc");createAccForm=$("#createAccForm");createAccBtn=$("#createAccBtn");updateAccBtn=$("#updateAccBtn");modalHeaderTitle=$("#modalHeaderTitle");accName=$("#accName");
billableRadioGroup=$(".billable-radios");enabledRadioGroup=$(".enabled-radios");acc_retention_time=$("#acc_retention_time");act_log_retention_time=$("#act_log_retention_time");br1=$("#bill_rate1");br2=$("#bill_rate2");br3=$("#bill_rate3");br4=$("#bill_rate4");br5=$("#bill_rate5");br1min=$("#bill_rate1_min_pay");br2min=$("#bill_rate2_min_pay");br3min=$("#bill_rate3_min_pay");br4min=$("#bill_rate4_min_pay");br5min=$("#bill_rate5_min_pay");br1_TAT=$("#bill_rate1_TAT");br2_TAT=$("#bill_rate2_TAT");br3_TAT=
$("#bill_rate3_TAT");br4_TAT=$("#bill_rate4_TAT");br5_TAT=$("#bill_rate5_TAT");br1type=$("#br1box");br2type=$("#br2box");br3type=$("#br3box");br4type=$("#br4box");br5type=$("#br5box");br1desc=$("#bill_rate1_desc");br2desc=$("#bill_rate2_desc");br3desc=$("#bill_rate3_desc");br4desc=$("#bill_rate4_desc");br5desc=$("#bill_rate5_desc");$(".modal").niceScroll({hwacceleration:!0,smoothscroll:!0,cursorcolor:"white",cursorborder:0,scrollspeed:10,mousescrollstep:20,cursoropacitymax:.7});$("body").niceScroll({hwacceleration:!0,
smoothscroll:!0,cursorcolor:"white",cursorborder:0,scrollspeed:10,mousescrollstep:20,cursoropacitymax:.7});$(".radio-no-icon").checkboxradio({icon:!1});$.ajaxSetup({cache:!1});var c=document.querySelector("#refresh_btn");new mdc.ripple.MDCRipple(document.querySelector("#refresh_btn"));$(".createAccForm input:not(input[type=radio])").each(function(){$(this).focus(function(){hideValidate(this)})});$(".createAccForm input[type=radio]").each(function(){$(this).focus(function(){hideValidate(this,!0)})});
accountsDTRef=accountsDT.DataTable({rowId:"acc_id",ajax:"../api/v1/accounts?dt",processing:!0,lengthChange:!1,pageLength:10,autoWidth:!1,columnDefs:[{targets:["_all"],className:"mdc-data-table__cell"}],columns:[{data:"acc_id"},{data:"acc_name"},{data:"job_prefix"},{data:"acc_creation_date"},{data:"acc_retention_time"},{data:"act_log_retention_time"},{data:"job_prefix"},{data:"enabled",render:function(a){return 1==a?'<i class="fas fa-check-circle vtex-status-icon"></i>':'<i class="fas fa-times-circle vtex-status-icon"></i>'}},
{data:"billable",render:function(a){return 1==a?'<i class="fas fa-check-circle vtex-status-icon"></i>':'<i class="fas fa-times-circle vtex-status-icon"></i>'}}]});$.contextMenu({selector:".accounts-tbl tbody tr",callback:function(a,b){b=accountsDTRef.row(this).data();switch(a){case "delete":var d=b.acc_id;$.confirm({title:'<i class="fas fa-user-minus"></i> Delete Account?',content:"Are you sure do you want to delete <b>"+d+"-"+b.acc_name+'</b> account?<br><br><span style="color: red">USE WITH CAUTION THIS WILL DELETE THE ACCOUNT AND ALL RELATED DATA INCLUDING JOB ENTRIES</span>',
buttons:{confirm:{text:"yes",btnClass:"btn-red",action:function(){$.ajax({type:"DELETE",url:API_INSERT_URL+d,processData:!1,contentType:!1,success:function(a){accountsDTRef.ajax.reload();$.confirm({title:"Success",content:a.msg,buttons:{confirm:{btnClass:"btn-green",action:function(){return!0}}}})},error:function(a){accountsDTRef.ajax.reload();$.confirm({title:"Error",content:a.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",action:function(){return!0}}}})}});return!0}},cancel:{text:"no",btnClass:"btn-green",
function:function(){return!0}}}});break;case "edit":preFillForm(b)}},items:{edit:{name:"Edit",icon:"fas fa-user-edit"},sep1:"---------","delete":{name:"Delete",icon:"fas fa-user-minus"}}});c.addEventListener("click",function(a){accountsDTRef.ajax.reload()});createAcc.on("click",function(a){updateAccBtn.css("display","none");createAccBtn.css("display","inline");createAccModal.style.display="block";$("#modal").stop().animate({scrollTop:0},500)});updateAccBtn.on("click",function(d){a(!0,currentID)});
createAccBtn.on("click",function(d){a()});$(".cancel-acc-button").on("click",function(a){resetForm();createAccModal.style.display="none"});$.ajax({url:SPEAKER_TYPES_URL,method:"GET",success:function(a){speakerTypesGlobal=a;setupComboBox(a,"br1box");setupComboBox(a,"br2box");setupComboBox(a,"br3box");setupComboBox(a,"br4box");setupComboBox(a,"br5box");createAccBtn.removeAttr("disabled");updateAccBtn.removeAttr("disabled")}});acc_retention_time.spinner({spin:function(a,b){if(0>b.value)return $(this).spinner("value",
0),!1}});act_log_retention_time.spinner({spin:function(a,b){if(0>b.value)return $(this).spinner("value",0),!1}});$("#bill_rate1_TAT,#bill_rate2_TAT,#bill_rate3_TAT,#bill_rate4_TAT,#bill_rate5_TAT").spinner({spin:function(a,b){if(0>b.value)return $(this).spinner("value",0),!1}});$("#bill_rate1, #bill_rate1_min_pay,#bill_rate2, #bill_rate2_min_pay,#bill_rate3, #bill_rate3_min_pay,#bill_rate4, #bill_rate4_min_pay,#bill_rate5, #bill_rate5_min_pay").spinner({min:0,step:.01,numberFormat:"C",spin:function(a,
b){if(0>b.value)return $(this).spinner("value",0),!1}})});
function setupComboBox(a,c){var d=document.getElementById(c),b;a.forEach(function(a){b=document.createElement("option");b.setAttribute("value",a.value);b.setAttribute("id","test");b.innerHTML=a.label;d.appendChild(b)});$.widget("custom.combobox",{_create:function(){this.wrapper=$("<span>").addClass("custom-combobox custom-"+c).insertAfter(this.element);this.element.hide();this._createAutocomplete();this._createShowAllButton()},_createAutocomplete:function(){var a=this.element.children(":selected");
a=a.val()?a.text():"";this.input=$("<input>").appendTo(this.wrapper).val(a).attr("title","").addClass("custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source")}).tooltip({classes:{"ui-tooltip":"ui-state-highlight"}});this._on(this.input,{autocompleteselect:function(a,b){b.item.option.selected=!0;this._trigger("select",a,{item:b.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var a=
this.input,b=!1;$("<a>").attr("tabIndex",-1).appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").on("mousedown",function(){b=a.autocomplete("widget").is(":visible")}).on("click",function(){a.trigger("focus");b||a.autocomplete("search","")})},_source:function(a,b){var c=new RegExp($.ui.autocomplete.escapeRegex(a.term),"i");b(this.element.children("option").map(function(){var b=$(this).text();
if(this.value&&(!a.term||c.test(b)))return{label:b,value:b,option:this}}))},_removeIfInvalid:function(a,b){if(!b.item){a=this.input.val();var c=a.toLowerCase(),d=!1;this.element.children("option").each(function(){if($(this).text().toLowerCase()===c)return this.selected=d=!0,!1});d||(this.input.val("").attr("title",a+" didn't match any item").tooltip("open"),this.element.val(""),this._delay(function(){this.input.tooltip("close").attr("title","")},2500),this.input.autocomplete("instance").term="")}},
_destroy:function(){this.wrapper.remove();this.element.show()}});$("#"+c).combobox()}function htmlEncodeStr(a){return a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&lsquo;")}
function resetForm(){modalHeaderTitle.html(CREATE_ACC_HEADER);updateAccBtn.css("display","none");createAccBtn.css("display","inline");createAccForm.find("input:not(input[type=radio])").val("");createAccForm.find("input[type=radio]").prop("checked",!1).change();createAccBtn.removeAttr("disabled");updateAccBtn.removeAttr("disabled")}
function preFillForm(a){currentID=a.acc_id;modalHeaderTitle.html(UPDATE_ACC_HEADER);updateAccBtn.css("display","inline");createAccBtn.css("display","none");accName.val(a.acc_name);acc_retention_time.val(a.acc_retention_time);act_log_retention_time.val(a.act_log_retention_time);"1"===a.enabled?$("#enabled-t").prop("checked",!0).change():$("#enabled-f").prop("checked",!0).change();"1"===a.billable?$("#billable-t").prop("checked",!0).change():$("#billable-f").prop("checked",!0).change();br1.val(a.bill_rate1);
br2.val(a.bill_rate2);br3.val(a.bill_rate3);br4.val(a.bill_rate4);br5.val(a.bill_rate5);br1min.val(a.bill_rate1_min_pay);br2min.val(a.bill_rate2_min_pay);br3min.val(a.bill_rate3_min_pay);br4min.val(a.bill_rate4_min_pay);br5min.val(a.bill_rate5_min_pay);br1_TAT.val(a.bill_rate1_TAT);br2_TAT.val(a.bill_rate2_TAT);br3_TAT.val(a.bill_rate3_TAT);br4_TAT.val(a.bill_rate4_TAT);br5_TAT.val(a.bill_rate5_TAT);var c=a.bill_rate1_type?a.bill_rate1_type:0,d=a.bill_rate3_type?a.bill_rate3_type:0,b=a.bill_rate2_type?
a.bill_rate2_type:0,e=a.bill_rate4_type?a.bill_rate4_type:0,f=a.bill_rate5_type?a.bill_rate5_type:0;br1type.val(c);$(".custom-br1box input").val(speakerTypesGlobal[c].label);br2type.val(b);$(".custom-br2box input").val(speakerTypesGlobal[b].label);br3type.val(d);$(".custom-br3box input").val(speakerTypesGlobal[d].label);br4type.val(e);$(".custom-br4box input").val(speakerTypesGlobal[e].label);br5type.val(f);$(".custom-br5box input").val(speakerTypesGlobal[f].label);br1desc.val(a.bill_rate1_desc);
br2desc.val(a.bill_rate2_desc);br3desc.val(a.bill_rate3_desc);br4desc.val(a.bill_rate4_desc);br5desc.val(a.bill_rate5_desc);createAccModal.style.display="block";$("#modal").stop().animate({scrollTop:0},500)}
function validateForm(){var a=!0;0===$(".billable-radios input[type=radio]:checked").length&&(a=!1,billableRadioGroup.addClass("vtex-validate-error"));0===$(".enabled-radios input[type=radio]:checked").length&&(a=!1,enabledRadioGroup.addClass("vtex-validate-error"));isEmptyInput(accName)&&(a=!1,accName.addClass("vtex-validate-error"));0>=act_log_retention_time.val()&&(a=!1,act_log_retention_time.addClass("vtex-validate-error"));0>=acc_retention_time.val()&&(a=!1,acc_retention_time.addClass("vtex-validate-error"));
a||$.confirm({title:"Error",content:"Make sure to correctly fill the highlighted fields.",scrollToPreviousElement:!1,scrollToPreviousElementAnimate:!1,buttons:{confirm:{btnClass:"btn-red",text:"OK",action:function(){$("#modal").stop().animate({scrollTop:0},500);return!0}}}});return a}function hideValidate(a,c){((void 0===c?0:c)?$(a).parent():$(a)).removeClass("vtex-validate-error")}function isEmptyInput(a){return!$.trim(a.val())}
function convertToSearchParam(a){var c=new URLSearchParams;a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next()){var b=$jscomp.makeIterator(d.value);d=b.next().value;b=b.next().value;c.set(d,b)}return c};
