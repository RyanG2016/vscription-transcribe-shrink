var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};(function(){})(jQuery);
var loadingOverlay,loadingText,stateRequest,stateGroup,signupBtn,form,pwd,confirmPwd,countryBox,stateBox,countriesURL="../api/v1/countries/",stateURL="../api/v1/cities/",signupURL="../api/v1/signup/",firstLaunch=!0;
$(document).ready(function(){function b(){var a=pwd.val();if(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,. <>\/?]).{8,}/gm.test(a)){pwd.removeClass("is-invalid");if(pwd.val()===confirmPwd.val())return form.classList.add("was-validated"),confirmPwd.removeClass("is-invalid"),!0;form.classList.remove("was-validated");confirmPwd.addClass("is-invalid")}else return form.classList.remove("was-validated"),pwd.addClass("is-invalid"),!1}signupBtn=$("#signupBtn");loadingText=$("#loadingText");
stateGroup=$("#stateGroup");countryBox=$("#countryBox");stateBox=$("#stateBox");loadingOverlay=$("#overlay");pwd=$("#inputPassword");confirmPwd=$("#inputConfirmPassword");form=document.getElementById("signupForm");pwd.popover({html:!0,content:"<ul>\n    <li><b>minimum length is 8 characters.</b></li>\n    <li>at least 1 uppercase.</li>\n    <li>at least 1 lowercase.</li>\n    <li>at least 1 number.</li>\n    <li>at least 1 special character.</li>\n</ul>"});pwd.keyup(function(){firstLaunch?firstLaunch=
!1:b()});confirmPwd.keyup(function(){firstLaunch?firstLaunch=!1:b()});form.addEventListener("submit",function(a){a.preventDefault();a.stopPropagation();if(!0===(b()&&form.checkValidity())){a=$("#countryBox option:selected").text();var c=new FormData,d=$("#signupForm").serializeArray();$.each(d,function(a,b){c.append(b.name,b.value)});c.append("country",a);$.ajax({type:"POST",url:signupURL,data:c,processData:!1,contentType:!1,success:function(a){$.confirm({title:"Success",type:"green",content:a.msg,
buttons:{confirm:{text:"OK",btnClass:"btn-green",action:function(){location.href="index.php"}}}})},error:function(a){null!=a.responseJSON.code&&301==a.responseJSON.code?$.confirm({title:"oops..",type:"red",content:a.responseJSON.msg,buttons:{confirm:{text:"Yes",btnClass:"btn-green",action:function(){location.href="index.php"}},cancel:{text:"No",btnClass:"btn-red"}}}):$.confirm({title:"oops..",type:"red",content:a.responseJSON.msg,buttons:{confirm:{text:"OK",btnClass:"btn-green"}}})}})}},!1);$("body").niceScroll({hwacceleration:!0,
smoothscroll:!0,cursorcolor:"#f5862c",cursorborder:0,scrollspeed:10,mousescrollstep:20,cursoropacitymax:.7});countryBox.on("changed.bs.select",function(a,b,d,e){a=countryBox.selectpicker("val");"203"===a||"204"===a?(loadingOverlay[0].style.display="block",stateGroup[0].style.display="block",loadState(countryBox.selectpicker("val"))):stateGroup[0].style.display="none"});loadingText.html("Loading countries..");loadCountries()});
function login(){loginBtn.html("Please wait..");loginBtn.attr("disabled","");var b=$('.validate-input .input100[name="email"]').val(),a=$('input[name="password"]').val(),c={};1===($('input[name="remember"]').is(":checked")?1:0)&&(c="rememberme");$.ajax({type:"POST",url:"api/v1/login/",data:c,async:!1,beforeSend:function(c){c.setRequestHeader("Authorization","Basic "+btoa(b+":"+a))},success:function(){location.href="index.php"},error:function(a){void 0!==a.responseJSON.code?5===a.responseJSON.code?
$.confirm({title:"Error",type:"red",content:a.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",text:"Ok"},resend:{btnClass:"btn-green",text:"Resend Email",action:function(){loginBtn.html("Please wait..");loginBtn.attr("disabled","");$.post("data/parts/backend_request.php",{reqcode:50,args:JSON.stringify({email:b})}).done(function(a){$.confirm({title:"Success",type:"green",content:"Verification Email sent.",buttons:{confirm:{text:"OK",btnClass:"btn-green",action:function(){showLoginFields()}}}})})}}}}):
404===a.responseJSON.code?$.confirm({title:"Hmm..",type:"red",content:a.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",text:"Ok"}}}):$.confirm({title:"Error",type:"red",content:a.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",text:"Ok"}}}):$.confirm({title:"Error",type:"red",content:a.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",text:"Ok"}}});showLoginFields()}})}
function loadState(b){loadingText.html("Loading states..");stateBox.selectpicker("destroy");null!=stateRequest&&stateRequest.abort();stateRequest=$.ajax({url:stateURL+b,method:"GET",success:function(a){stateBox.html("");a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,stateBox.html(stateBox.html()+"<option value='"+b.id+"'>"+b.city+"</option>");stateBox.selectpicker({liveSearch:!0,liveSearchPlaceholder:"Search"});stateBox.selectpicker("refresh");loadingOverlay[0].style.display=
"none"}})}function loadCountries(){$.ajax({url:countriesURL,method:"GET",success:function(b){countryBox.html("");b=$jscomp.makeIterator(b);for(var a=b.next();!a.done;a=b.next())a=a.value,countryBox.html(countryBox.html()+"<option value='"+a.id+"'>"+a.country+"</option>");countryBox.selectpicker({liveSearch:!0,liveSearchPlaceholder:"Search"});countryBox.selectpicker("refresh");loadState(203)}})};
