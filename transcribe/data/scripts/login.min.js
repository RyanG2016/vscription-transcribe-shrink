(function(){})(jQuery);var loginBtn,email,pwdInput,pwdDiv,remember,forgotPwd,formTitle,srcIsLogin=!0;
$(document).ready(function(){loginBtn=$(".login100-form-btn");email=$('input[name="email"]');pwdInput=$('input[name="password"]');pwdDiv=$("#passwordDiv");forgotPwd=$("#forgotpwd");remember=$("#remember");formTitle=$("#title");email.blur();pwdInput.blur();pwdInput.attr("maxlength",30);$("#forgotpwd a").click(function(){showResetPasswordForm()});$("body").niceScroll({hwacceleration:!0,smoothscroll:!0,cursorcolor:"white",cursorborder:0,scrollspeed:10,mousescrollstep:20,cursoropacitymax:.7})});
$(".input100").each(function(){$(this).on("blur",function(){""!==$(this).val().trim()?$(this).addClass("has-val"):$(this).removeClass("has-val")})});var input=$(".validate-input .input100");
$(".validate-form").on("submit",function(){var a=!0;if(srcIsLogin){for(var b=0;b<input.length;b++)switch(input[b].name){case "email":!1===validate(input[b])&&(showValidate(input[b]),a=!1)}!0===a&&(a=!1,login())}else!1===validate(email)&&(showValidate(email),a=!1),!0===a&&(loginBtn.html("Please wait.."),loginBtn.attr("disabled",""),a=!1,resetpw());return a});$(".validate-form .input100").each(function(){$(this).focus(function(){hideValidate(this)})});
function validate(a){if(("email"===$(a).attr("type")||"email"===$(a).attr("name"))&&null==$(a).val().trim().match(/^([a-zA-Z0-9_\-.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(]?)$/))return!1}function showValidate(a){a=$(a).parent();$(a).addClass("alert-validate")}function hideValidate(a){a=$(a).parent();$(a).removeClass("alert-validate")}
function showResetPasswordForm(){srcIsLogin=!1;forgotPwd.slideUp();pwdDiv.slideUp();loginBtn.html("Send Reset Link");loginBtn.removeAttr("disabled");formTitle.html("Password Reset");remember.slideUp()}
function showLoginFields(){srcIsLogin=!0;forgotPwd.slideDown();remember.slideDown();pwdDiv.slideDown();loginBtn.html("Login");loginBtn.removeAttr("disabled");formTitle.html("Welcome");$("body").niceScroll({hwacceleration:!0,smoothscroll:!0,cursorcolor:"white",cursorborder:0,scrollspeed:10,mousescrollstep:20,cursoropacitymax:.7})}
function login(){loginBtn.html("Please wait..");loginBtn.attr("disabled","");var a=$('.validate-input .input100[name="email"]').val(),b=$('input[name="password"]').val(),c={};1===($('input[name="remember"]').is(":checked")?1:0)&&(c="rememberme");$.ajax({type:"GET",url:"api/v1/login/",data:c,async:!1,beforeSend:function(d){d.setRequestHeader("Authorization","Basic "+btoa(a+":"+b))},success:function(){location.href="index.php"},error:function(b){void 0!==b.responseJSON.code?5===b.responseJSON.code?
$.confirm({title:"Error",type:"red",content:b.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",text:"Ok"},resend:{btnClass:"btn-green",text:"Resend Email",action:function(){loginBtn.html("Please wait..");loginBtn.attr("disabled","");var b=new FormData;b.append("email",a);$.ajax({type:"POST",url:"/api/v1/signup/resend/",data:b,processData:!1,contentType:!1,success:function(a){$.confirm({title:"Success",type:"green",content:a.msg,buttons:{confirm:{text:"OK",btnClass:"btn-green",action:function(){showLoginFields()}}}})},
error:function(a){$.confirm({title:"oops..",type:"red",content:a.responseJSON.msg,buttons:{confirm:{text:"OK",btnClass:"btn-green",action:function(){showLoginFields()}}}})}})}}}}):404===b.responseJSON.code?$.confirm({title:"Hmm..",type:"red",content:b.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",text:"Ok"}}}):$.confirm({title:"Error",type:"red",content:b.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",text:"Ok"}}}):$.confirm({title:"Error",type:"red",content:b.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",
text:"Ok"}}});showLoginFields()}})}
function resetpw(){var a=email.val();$.post("data/parts/backend_request.php",{reqcode:40,args:JSON.stringify({email:a})}).done(function(b){1==b?(b=new FormData,b.append("email",a),$.ajax({type:"POST",url:"/api/v1/login/reset/",data:b,processData:!1,contentType:!1,success:function(a){$.confirm({title:"Success",type:"green",content:a.msg,buttons:{confirm:{text:"OK",btnClass:"btn-green",action:function(){showLoginFields()}}}})},error:function(a){$.confirm({title:"oops..",type:"red",content:a.responseJSON.msg,
buttons:{confirm:{text:"OK",btnClass:"btn-green",action:function(){showLoginFields()}}}})}})):$.confirm({title:"Hmm..",type:"red",content:"We couldn't find your account.",buttons:{confirm:{text:"Signup?",btnClass:"btn-green",action:function(){location.href="signup.php"}},cancel:{text:"try again",btnClass:"btn-green",action:function(){loginBtn.html("Send Reset Link");loginBtn.removeAttr("disabled")}}}})})};
