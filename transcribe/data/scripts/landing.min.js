var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};
var currentRole,currentAccName,chooseJobModal,updateRoleModalBtn,closeModalBtn,setDefaultRoleBtn,changeRoleBtn,accessesGlobal,modalHeaderTitle,accessId,roleRequest,ACCESS_URL="../api/v1/access/?out",SET_DEFAULT_ACCESS_URL="../api/v1/users/set-default/",ROLES_FOR_ACCOUNT_URL="../api/v1/access?out&acc_id=",CHANGE_ROLE_HEADER='<i class="fas fa-wrench"></i>&nbsp;Change Role',SET_DEFAULT_ROLE_HEADER='<i class="fas fa-user-edit"></i>&nbsp;Set Default',accountBox,roleBox,setDefaultModal,accountsArray=[];
$(document).ready(function(){function b(a){roleBox.selectpicker("destroy");null!=roleRequest&&roleRequest.abort();roleRequest=$.ajax({url:ROLES_FOR_ACCOUNT_URL+a,method:"GET",success:function(a){updateRoleModalBtn.removeAttr("disabled");var b=document.getElementById("roleBox");b.innerHTML="";a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.innerHTML+="<option value='"+c.acc_role+"'>"+c.acc_role+" - "+c.role_desc+"</option>";roleBox.selectpicker({liveSearch:!0,liveSearchPlaceholder:"Choose Role"});
roleBox.selectpicker("refresh")}})}currentRole=$("#currentRole");currentAccName=$("#currentAccountName");updateRoleModalBtn=$("#updateRoleBtn");closeModalBtn=$("#closeModalBtn");changeRoleBtn=$("#changeRoleBtn");modalHeaderTitle=$("#modalHeaderTitle");setDefaultRoleBtn=$("#setDefaultRoleBtn");accessId=$("#accessId");accountBox=$("#accountBox");roleBox=$("#roleBox");chooseJobModal=document.getElementById("modal");closeModalBtn.on("click",function(a){chooseJobModal.style.display="none"});changeRoleBtn.on("click",
function(a){setModalUI(!1);chooseJobModal.style.display="block"});setDefaultRoleBtn.on("click",function(a){setModalUI(!0);chooseJobModal.style.display="block"});updateRoleModalBtn.on("click",function(a){updateRoleModalBtn.attr("disabled","disabled");a=new FormData;a.append("acc_id",accountBox.selectpicker("val"));a.append("acc_role",roleBox.selectpicker("val"));$.ajax({type:"POST",url:setDefaultModal?SET_DEFAULT_ACCESS_URL:ACCESS_URL,processData:!1,data:convertToSearchParam(a),success:function(a){chooseJobModal.style.display=
"none";$.confirm({title:"Success",content:a.msg,buttons:{confirm:{btnClass:"btn-green",action:function(){updateRoleModalBtn.removeAttr("disabled");location.reload();return!0}}}})},error:function(a){$.confirm({title:"Error",content:a.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",action:function(){updateRoleModalBtn.removeAttr("disabled");return!0}}}})}})});$.ajax({url:ACCESS_URL,method:"GET",success:function(a){accessesGlobal=a;var c=document.getElementById("accountBox");a=$jscomp.makeIterator(a);
for(var d=a.next();!d.done;d=a.next())d=d.value,-1==accountsArray.indexOf(d.acc_id)&&(accountsArray.push(d.acc_id),c.innerHTML+="<option value='"+d.acc_id+"'>"+d.acc_id+" - "+d.acc_name+"</option>");accountBox.selectpicker({liveSearch:!0,liveSearchPlaceholder:"Choose Account"});b(accountBox.selectpicker("val"));accountBox.on("changed.bs.select",function(a,c,d,e){b(accountBox.selectpicker("val"))})}})});function removeLoadingSpinner(){$(".spinner").remove()}
function generateLoadingSpinner(){var b=document.createElement("div");b.setAttribute("class","spinner");var a=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div");a.setAttribute("class","bounce1");c.setAttribute("class","bounce2");d.setAttribute("class","bounce3");b.appendChild(a);b.appendChild(c);b.appendChild(d);return b}
function convertToSearchParam(b){var a=new URLSearchParams;b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;c=b.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;d=d.next().value;a.set(c,d)}return a}function setModalUI(b){(setDefaultModal=b=void 0===b?!1:b)?modalHeaderTitle.html(SET_DEFAULT_ROLE_HEADER):modalHeaderTitle.html(CHANGE_ROLE_HEADER)};
