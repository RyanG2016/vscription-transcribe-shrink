var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return c?c.call(b):$jscomp.arrayIterator(b)};
var currentRole,currentAccName,chooseJobModal,updateRoleModalBtn,closeModalBtn,setDefaultRoleBtn,changeRoleBtn,accessesGlobal,rolesGlobal,modalHeaderTitle,accessId,roleRequest,ACCESS_URL="../api/v1/access/?out",SET_DEFAULT_ACCESS_URL="../api/v1/users/set-default/",ROLES_FOR_ACCOUNT_URL="../api/v1/access?out&acc_id=",CHANGE_ROLE_HEADER='<i class="fas fa-wrench"></i>&nbsp;Change Role',SET_DEFAULT_ROLE_HEADER='<i class="fas fa-user-edit"></i>&nbsp;Set Default',accountBox,roleBox,setDefaultModal,accountsArray=
[],loading,roleIsset;
$(document).ready(function(){function b(a,b){var d=new FormData;d.append("acc_id",a);d.append("acc_role",b);$.ajax({type:"POST",url:ACCESS_URL,processData:!1,data:convertToSearchParam(d),success:function(b){chooseJobModal.style.display="none";location.reload()},error:function(b){}})}function c(a){roleBox.selectpicker("destroy");null!=roleRequest&&roleRequest.abort();roleRequest=$.ajax({url:ROLES_FOR_ACCOUNT_URL+a,method:"GET",success:function(a){rolesGlobal=a;updateRoleModalBtn.removeAttr("disabled");var d=
document.getElementById("roleBox");d.innerHTML="";a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,d.innerHTML+="<option value='"+c.acc_role+"'>"+c.acc_role+" - "+c.role_desc+"</option>";roleBox.selectpicker({liveSearch:!0,liveSearchPlaceholder:"Choose Role"});roleBox.selectpicker("refresh");roleIsset?loading.style.display="none":1==accessesGlobal.length?1==rolesGlobal.length?b(rolesGlobal[0].acc_id,rolesGlobal[0].acc_role):(chooseJobModal.style.display="block",loading.style.display=
"none"):(0!=accessesGlobal.length&&(chooseJobModal.style.display="block"),loading.style.display="none")}})}loading=document.getElementById("overlay");loading.style.display="block";(new EnjoyHint({})).set([{"next .navbar-text":"This is a test to focus on the navbar title in the landing page"},{"next #adminCard":"This is the admin card in circle",shape:"circle"},{selector:"#typistCard",description:"This is the typist card",skipButton:{text:"Finish"}}]);currentRole=$("#currentRole");currentAccName=$("#currentAccountName");
updateRoleModalBtn=$("#updateRoleBtn");closeModalBtn=$("#closeModalBtn");changeRoleBtn=$("#changeRoleBtn");modalHeaderTitle=$("#modalHeaderTitle");setDefaultRoleBtn=$("#setDefaultRoleBtn");accessId=$("#accessId");accountBox=$("#accountBox");roleBox=$("#roleBox");chooseJobModal=document.getElementById("modal");closeModalBtn.on("click",function(a){chooseJobModal.style.display="none"});changeRoleBtn.on("click",function(a){setModalUI(!1);chooseJobModal.style.display="block"});setDefaultRoleBtn.on("click",
function(a){setModalUI(!0);chooseJobModal.style.display="block"});updateRoleModalBtn.on("click",function(a){updateRoleModalBtn.attr("disabled","disabled");a=new FormData;a.append("acc_id",accountBox.selectpicker("val"));a.append("acc_role",roleBox.selectpicker("val"));$.ajax({type:"POST",url:setDefaultModal?SET_DEFAULT_ACCESS_URL:ACCESS_URL,processData:!1,data:convertToSearchParam(a),success:function(a){chooseJobModal.style.display="none";location.reload()},error:function(a){$.confirm({title:"Error",
content:a.responseJSON.msg,buttons:{confirm:{btnClass:"btn-red",action:function(){updateRoleModalBtn.removeAttr("disabled");return!0}}}})}})});$.ajax({url:ACCESS_URL,method:"GET",success:function(a){accessesGlobal=a;var b=document.getElementById("accountBox");a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=e.value,-1==accountsArray.indexOf(e.acc_id)&&(accountsArray.push(e.acc_id),b.innerHTML+="<option value='"+e.acc_id+"'>"+e.acc_id+" - "+e.acc_name+"</option>");accountBox.selectpicker({liveSearch:!0,
liveSearchPlaceholder:"Choose Account"});c(accountBox.selectpicker("val"));accountBox.on("changed.bs.select",function(a,b,d,e){c(accountBox.selectpicker("val"))})}})});function removeLoadingSpinner(){$(".spinner").remove()}
function generateLoadingSpinner(){var b=document.createElement("div");b.setAttribute("class","spinner");var c=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div");c.setAttribute("class","bounce1");a.setAttribute("class","bounce2");d.setAttribute("class","bounce3");b.appendChild(c);b.appendChild(a);b.appendChild(d);return b}
function convertToSearchParam(b){var c=new URLSearchParams;b=$jscomp.makeIterator(b);for(var a=b.next();!a.done;a=b.next()){var d=$jscomp.makeIterator(a.value);a=d.next().value;d=d.next().value;c.set(a,d)}return c}function setModalUI(b){(setDefaultModal=b=void 0===b?!1:b)?modalHeaderTitle.html(SET_DEFAULT_ROLE_HEADER):modalHeaderTitle.html(CHANGE_ROLE_HEADER)};
