var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var d=$jscomp.propertyToPolyfillSymbol[b];if(null==d)return a[b];d=a[d];return void 0!==d?d:a[b]};$jscomp.polyfill=function(a,b,d,c){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,d,c):$jscomp.polyfillUnisolated(a,b,d,c))};
$jscomp.polyfillUnisolated=function(a,b,d,c){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))return;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,d,c){var e=a.split(".");a=1===e.length;c=e[0];c=!a&&c in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var k=0;k<e.length-1;k++){var n=e[k];if(!(n in c))return;c=c[n]}e=e[e.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?c[e]:null;b=b(d);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==d&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(c,e,{configurable:!0,writable:!0,value:b})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var d=0,c=function(a){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(a||"")+"_"+d++,a)};return c},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<b.length;d++){var c=$jscomp.global[b[d]];"function"===typeof c&&"function"!=typeof c.prototype[a]&&$jscomp.defineProperty(c.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var d=0,c={next:function(){if(d<a.length){var e=d++;return{value:b(e,a[e]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,d){return a===d?0!==a||1/a===1/d:a!==a&&d!==d}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,d){var b=this;b instanceof String&&(b=String(b));var e=b.length;d=d||0;for(0>d&&(d=Math.max(d+e,0));d<e;d++){var k=b[d];if(k===a||Object.is(k,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,d){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,d||0)}},"es6","es3");(function(a){})(jQuery);var uploadAjax;
function documentReady(){function a(a){var f=new FormData;f.append("reqcode",65);f.append("suffix",a);h=setInterval(function(){$.ajax({type:"POST",url:"data/parts/backend_request.php",data:f,processData:!1,contentType:!1,success:function(a){"null"===a?(clearInterval(h),b(100,!1)):(a=JSON.parse(a),a=Math.floor(100*a.bytes_processed/a.content_length),console.log("percentage completed: "+a),b(a,!1),100<=a&&(clearInterval(h),b(100,!1)))}})},600)}function b(a,f){E.removeClass("mdc-linear-progress--closed");
K.progress=a/100;100!==a?p.text(a+"%"):(f?p.text("Cancelled."):p.text("Complete."),$(".modal-content p i").html(""),F.style.display="none",G.style.display="inline-block")}function d(){var a=document.createElement("div");a.setAttribute("class","spinner");var f=document.createElement("div"),b=document.createElement("div"),d=document.createElement("div");f.setAttribute("class","bounce1");b.setAttribute("class","bounce2");d.setAttribute("class","bounce3");a.appendChild(f);a.appendChild(b);a.appendChild(d);
return a}function c(a){a?0<q.length&&H.removeAttribute("disabled"):H.setAttribute("disabled","true")}function e(a,b,d,l){if(2===(void 0===l?0:l)||"audio/ds2"==b.type)b=b.size/1024/3.4584746913,l=(new Date(1E3*b)).toISOString().substr(11,8).toString(),$("#qfile"+a+" td:nth-child(4)").html("~"+l),r++,0===d&&(v[w.indexOf(a)]=Math.round(b)),r===x&&c(!0);else{var f=document.createElement("audio");f.setAttribute("preload","metadata");b=URL.createObjectURL(b);f.setAttribute("src",b);f.onloadedmetadata=function(){var b=
f.duration,l=(new Date(1E3*b)).toISOString().substr(11,8).toString();$("#qfile"+a+" td:nth-child(4)").html(l);r++;0===d&&(v[w.indexOf(a)]=Math.round(b));r===x&&c(!0);f.remove()}}}function k(a,b){if(9>=A){if(134217728<b)return 1;if(134217728<B+b)return 2;B+=b;q.push(t[a]);w.push(a);A++;return 0}return 3}function n(a,b,c,l){var f=document.createElement("tr");f.setAttribute("id","qfile"+a);var D=document.createElement("td");D.innerHTML=a+1;a=document.createElement("td");a.innerHTML=b;b=document.createElement("td");
c=1024>c?c+"bytes":1024<c&&1048576>c?(c/1024).toFixed(1)+"KB":1048576<c?(c/1048576).toFixed(1)+"MB":void 0;b.innerHTML=c;c=document.createElement("td");c.appendChild(d());var e=document.createElement("td");switch(l){case 0:e.setAttribute("style","color: #53a13d;");e.innerHTML="Ready to upload.";break;case 1:e.setAttribute("style","color: #B00020;");e.innerHTML="File exceeds 128MB - Skipped";break;case 2:e.setAttribute("style","color: #B00020;");e.innerHTML="Total files exceed 128MB - Skipped";break;
case 3:e.setAttribute("style","color: #B00020;"),e.innerHTML="File count exceeds the limit of 10 - Skipped"}f.appendChild(D);f.appendChild(a);f.appendChild(b);f.appendChild(c);f.appendChild(e);return f}function L(a,b){var d=document.createElement("tr");d.setAttribute("id","qfile"+a);var c=document.createElement("td");c.innerHTML=a+1;var f=document.createElement("td");f.innerHTML=b;b=document.createElement("td");b.setAttribute("colspan","4");b.innerHTML="Not a valid file type. Update your selection.";
b.setAttribute("style","color: #B00020;");removeFile(a);d.appendChild(c);d.appendChild(f);d.appendChild(b);return d}function I(){u.value="";A=B=r=x=0;q=[];v=[];for(w=[];g.firstChild;)g.removeChild(g.firstChild);var a=document.createElement("p");a.textContent="No files currently selected for upload";g.appendChild(a);document.querySelector(".submit_btn").setAttribute("disabled","true");document.querySelector(".clear_btn").setAttribute("disabled","true")}function J(){g.removeChild(g.firstChild);var a=
document.createElement("p");g.appendChild(a);document.querySelector(".submit_btn").setAttribute("disabled","true");document.querySelector(".clear_btn").setAttribute("disabled","true");$(".demo_author").val("");$("#demo_job_type option:selected").html();$("#dictdatetime").datetimepicker("clear");$("#demo_speaker_type").val(0);$("#demo_comments").val("")}var u=document.getElementById("upload_btn");document.getElementById("upload_btn_lbl");document.getElementById("clear_btn");var H=document.querySelector(".submit_btn"),
F=document.getElementById("cancelUpload"),G=document.getElementById("confirmUpload"),g=document.querySelector(".preview"),z=document.querySelector(".previewModal");$("#dictdatetime").datetimepicker({format:"DD-MMM-YYYY hh:mm:ss A"});new mdc.ripple.MDCRipple(document.querySelector(".clear_btn"));new mdc.ripple.MDCRipple(document.querySelector(".upload_btn_lbl"));new mdc.ripple.MDCRipple(document.querySelector(".submit_btn"));new mdc.ripple.MDCRipple(document.querySelector("#cancelUpload"));new mdc.ripple.MDCRipple(document.querySelector("#confirmUpload"));
var M=document.getElementById("modal"),q=[],v=[],w=[],x=0,t,A=0,r=0,B=0;u.style.display="none";u.addEventListener("click",function(){I()});u.addEventListener("change",function(){for(;g.firstChild;)g.removeChild(g.firstChild);t=u.files;if(0===t.length){var a=document.createElement("p");a.textContent="No files currently selected for upload";g.appendChild(a)}else{x=t.length;document.querySelector(".clear_btn").removeAttribute("disabled");a=document.createElement("table");var b=document.createElement("tr"),
d=document.createElement("th"),c=document.createElement("th"),y=document.createElement("th"),m=document.createElement("th"),h=document.createElement("th");d.innerHTML="#";c.innerHTML="File Name";y.innerHTML="Size";m.innerHTML="Duration";h.innerHTML="Status";b.append(d);b.append(c);b.append(y);b.append(m);b.append(h);a.setAttribute("class","que-files");a.appendChild(b);g.appendChild(a);b=0;d=$jscomp.makeIterator(t);for(c=d.next();!c.done;c=d.next())c=c.value,y=document.createElement("p"),N.includes(c.type)?
(m=k(b,c.size),a.appendChild(n(b,c.name,c.size,m)),e(b,c,m)):""===c.type&&"ds2"===c.name.substr(c.name.length-3,3).toLowerCase()?(m=k(b,c.size),a.appendChild(n(b,c.name,c.size,m)),e(b,c,m,2)):a.appendChild(L(b,c.name)),g.appendChild(y),b++}console.log("current files: "+q.toString())});var K=new mdc.linearProgress.MDCLinearProgress(document.querySelector(".mdc-linear-progress")),E=$(".mdc-linear-progress"),p=$("#progressTxt");document.querySelector(".clear_btn").addEventListener("click",function(a){E.addClass("mdc-linear-progress--closed");
files=[];I()});F.addEventListener("click",function(a){void 0!==uploadAjax&&(null!=h&&clearInterval(h),uploadAjax.abort(),document.getElementById("upload_form").reset(),console.log("Upload Cancelled (1)"));location.reload()});G.addEventListener("click",function(a){location.href="main.php"});document.getElementsByClassName("needs-validation");var h,C=$("#upload_form");$("#datetimepicker5").datetimepicker();C.on("submit",function(d){d.preventDefault();C.addClass("was-validated");if(!0===C[0].checkValidity()){M.style.display=
"block";var c=new FormData;d=q;var e=$("#upload_form").serializeArray();$.each(e,function(a,b){c.append(b.name,b.value)});for(e=0;e<d.length;e++)c.append("file"+e,d[e]),c.append("dur"+e,v[e]),console.log(d[e]);c.append("authorName",$(".demo_author").val());c.append("jobType",$("#demo_job_type option:selected").html());c.append("dictDate",$("#dictdatetime").datetimepicker("viewDate").format("YYYY-MM-DD HH:mm:ss"));c.append("speakerType",$("#demo_speaker_type").val());""!==$("#demo_comments").val()&&
c.append("comments",$("#demo_comments").val());uploadAjax=$.ajax({type:"POST",url:"api/v1/files/",data:c,processData:!1,contentType:!1,success:function(a){null!=h&&clearInterval(h);b(100,!1);J();var c="",d=Object.keys(a).length;for(i=0;i<d;i++)c=!1===a[i].error?c+("<li>File: "+a[i].file_name+" - <span style='color:green;'>"+a[i].status+"</span></li>"):c+("<li>File: "+a[i].file_name+" - <span style='color:red;'>"+a[i].status+"</span></li>");a=document.createElement("ol");a.setAttribute("class","uploadResultList");
z.appendChild(a);z.insertAdjacentHTML("afterbegin",c)},error:function(a){null!=h&&clearInterval(h);J();b(100,!0);void 0!==a.responseJSON?(p.text("Error."),htmlEl="<span style='color: darkred'>"+a.responseJSON.msg+"</span>",a=document.createElement("ol"),z.appendChild(a),z.insertAdjacentHTML("afterbegin",htmlEl)):p.text("Upload Cancelled.")}});a("job_upload")}else d.stopPropagation()});var N="audio/mpeg audio/ogg audio/wav audio/ds2 audio/vnd.wave audio/wave audio/x-wav".split(" ")}
document.addEventListener("DOMContentLoaded",documentReady);document.addEventListener("beforeunload",function(a){void 0!==uploadAjax&&(uploadAjax.abort(),document.getElementById("upload_form").reset(),console.log("Upload Cancelled (2)"))});
