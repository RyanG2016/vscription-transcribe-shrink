(function(b){})(jQuery);var dataTbl,jobsDT,jobsDTRef;
$(document).ready(function(){dataTbl=$(".jobs_tbl");jobsDT=$("#jobs-tbl");$("body").niceScroll({hwacceleration:!0,smoothscroll:!0,cursorcolor:"white",cursorborder:0,scrollspeed:10,mousescrollstep:20,cursoropacitymax:.7});$.ajaxSetup({cache:!1});var b=document.querySelector("#refresh_btn"),d=document.querySelector("#newupload_btn"),e=document.querySelector("#manage_typists_btn");new mdc.ripple.MDCRipple(document.querySelector("#newupload_btn"));new mdc.ripple.MDCRipple(document.querySelector("#refresh_btn"));
new mdc.ripple.MDCRipple(document.querySelector("#manage_typists_btn"));e.addEventListener("click",function(a){document.location.href="manage_typists.php"});d.addEventListener("click",function(a){document.location.href="jobupload.php"});jobsDT.on("init.dt",function(){$(".cTooltip").hasClass("tooltipstered")||($(".download-icon").click(function(){var a=$(this).parent().parent().attr("id");download(a)}),$(".view-icon").click(function(){var a=$(this).parent().parent().attr("id");view(a)}),$(".cTooltip").tooltipster({animation:"grow",
theme:"tooltipster-punk",arrow:!0}))});jobsDTRef=jobsDT.DataTable({rowId:"file_id",ajax:"api/v1/files?dt",processing:!0,lengthChange:!1,pageLength:10,autoWidth:!1,columnDefs:[{targets:["_all"],className:"mdc-data-table__cell"}],columns:[{data:"job_id",render:function(a,b,c){return null!=c.file_comment?a+' <i class="material-icons mdc-button__icon job-comment cTooltip" aria-hidden="true" title=\''+htmlEncodeStr(c.file_comment)+"'>speaker_notes</i>":a}},{data:"file_author"},{data:"file_work_type"},
{data:"file_date_dict"},{data:"job_upload_date"},{data:"audio_length",render:function(a){return(new Date(1E3*a)).toISOString().substr(11,8)}},{data:"file_status_ref"},{data:"file_transcribed_date"},{data:"text_downloaded_date"},{data:"times_text_downloaded_date",render:function(a,b,c){return 3==c.file_status?"<a id='view-icon' class=\"material-icons view-icon\">visibility</a> <a class=\"material-icons download-icon\">cloud_download</a> <span class='times-downloaded'>+"+a+"</span>":""}}],initComplete:function(){this.api().columns().every(function(){var a=
this,b=$('<select><option value=""></option></select>').appendTo($(a.footer()).empty()).on("change",function(){var b=$.fn.dataTable.util.escapeRegex($(this).val());a.search(b?"^"+b+"$":"",!0,!1).draw()});a.data().unique().sort().each(function(a,d){b.append('<option value="'+a+'">'+a+"</option>")})})}});b.addEventListener("click",function(a){jobsDTRef.ajax.reload()});jobsDT.on("draw.dt",function(){$(".download-icon").click(function(){var a=$(this).parent().parent().attr("id");download(a)});$(".view-icon").click(function(){var a=
$(this).parent().parent().attr("id");view(a)});$(".cTooltip").hasClass("tooltipstered")||$(".cTooltip").tooltipster({animation:"grow",theme:"tooltipster-punk",arrow:!0})})});function download(b){$.post("data/parts/backend_request.php",{reqcode:17,args:JSON.stringify({file_id:b})}).done(function(b){window.open("./download.php?down="+b.toString(),"_blank").focus();jobsDTRef.ajax.reload()})}
function view(b){$.post("data/parts/backend_request.php",{reqcode:17,args:JSON.stringify({file_id:b})}).done(function(b){window.open("./view.php?down="+b.toString(),"popUpWindow","height=800,width=750,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes").focus();jobsDTRef.ajax.reload()})}function htmlEncodeStr(b){return b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&lsquo;")};
