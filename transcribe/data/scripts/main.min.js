(function(a){})(jQuery);var dataTbl,jobsDT,jobsDTRef;
$(document).ready(function(){dataTbl=$(".jobs_tbl");jobsDT=$("#jobs-tbl");$("body").niceScroll({hwacceleration:!0,smoothscroll:!0,cursorcolor:"white",cursorborder:0,scrollspeed:10,mousescrollstep:20,cursoropacitymax:.7});$.ajaxSetup({cache:!1});var a=document.querySelector("#refresh_btn"),d=document.querySelector("#newupload_btn");new mdc.ripple.MDCRipple(document.querySelector("#newupload_btn"));new mdc.ripple.MDCRipple(document.querySelector("#refresh_btn"));d.addEventListener("click",function(b){console.log("We should be going to the uploader page");
document.location.href="jobupload.php"});jobsDT.on("init.dt",function(){$(".cTooltip").hasClass("tooltipstered")||($(".download-icon").click(function(){var b=$(this).parent().parent().attr("id");download(b)}),$(".cTooltip").tooltipster({animation:"grow",theme:"tooltipster-punk",arrow:!0}))});jobsDTRef=jobsDT.DataTable({rowId:"file_id",ajax:"api/v1/file?dt",processing:!0,lengthChange:!1,pageLength:10,autoWidth:!1,columnDefs:[{targets:["_all"],className:"mdc-data-table__cell"}],columns:[{data:"job_id",
render:function(b,a,c){return null!=c.file_comment?b+' <i class="material-icons mdc-button__icon job-comment cTooltip" aria-hidden="true" title=\''+htmlEncodeStr(c.file_comment)+"'>speaker_notes</i>":b}},{data:"file_author"},{data:"file_work_type"},{data:"file_date_dict"},{data:"job_upload_date"},{data:"audio_length"},{data:"file_status_ref"},{data:"file_transcribed_date"},{data:"text_downloaded_date"},{data:"times_text_downloaded_date",render:function(b,a,c){return 3==c.file_status?"<a class=\"material-icons download-icon\">cloud_download</a> <span class='times-downloaded'>+"+
b+"</span>":""}}]});a.addEventListener("click",function(b){jobsDTRef.ajax.reload()});jobsDT.on("draw.dt",function(){$(".download-icon").click(function(){var b=$(this).parent().parent().attr("id");download(b)});$(".cTooltip").hasClass("tooltipstered")||$(".cTooltip").tooltipster({animation:"grow",theme:"tooltipster-punk",arrow:!0})})});
function download(a){$.post("data/parts/backend_request.php",{reqcode:17,args:JSON.stringify({file_id:a})}).done(function(a){window.open("./download.php?down="+a.toString(),"_blank").focus();jobsDTRef.ajax.reload()})}function htmlEncodeStr(a){return a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&lsquo;")};
