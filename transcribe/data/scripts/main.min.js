(function(c){})(jQuery);var dataTbl,jobsDT,jobsDTRef;
$(document).ready(function(){dataTbl=$(".jobs_tbl");jobsDT=$("#jobs-tbl");$("body").niceScroll({hwacceleration:!0,smoothscroll:!0,cursorcolor:"white",cursorborder:0,scrollspeed:10,mousescrollstep:20,cursoropacitymax:.7});$.ajaxSetup({cache:!1});var c=document.querySelector("#refresh_btn"),b=document.querySelector("#newupload_btn");new mdc.ripple.MDCRipple(document.querySelector("#newupload_btn"));new mdc.ripple.MDCRipple(document.querySelector("#refresh_btn"));b.addEventListener("click",function(a){console.log("We should be going to the uploader page");
document.location.href="jobupload.php"});jobsDT.on("init.dt",function(){$(".cTooltip").hasClass("tooltipstered")||($(".download-icon").click(function(){var a=$(this).parent().parent().attr("id");download(a)}),$(".cTooltip").tooltipster({animation:"grow",theme:"tooltipster-punk",arrow:!0}))});jobsDTRef=jobsDT.DataTable({rowId:"file_id",ajax:"api/v1/files?dt",processing:!0,lengthChange:!1,pageLength:10,autoWidth:!1,columnDefs:[{targets:["_all"],className:"mdc-data-table__cell"}],columns:[{data:"job_id",
render:function(a,c,b){return null!=b.file_comment?a+' <i class="material-icons mdc-button__icon job-comment cTooltip" aria-hidden="true" title=\''+htmlEncodeStr(b.file_comment)+"'>speaker_notes</i>":a}},{data:"file_author"},{data:"file_work_type"},{data:"file_date_dict"},{data:"job_upload_date"},{data:"audio_length",render:function(a){return(new Date(1E3*a)).toISOString().substr(11,8)}},{data:"file_status_ref"},{data:"file_transcribed_date"},{data:"text_downloaded_date"},{data:"times_text_downloaded_date",
render:function(a,c,b){return 3==b.file_status?"<a class=\"material-icons download-icon\">cloud_download</a> <span class='times-downloaded'>+"+a+"</span>":""}}]});c.addEventListener("click",function(a){jobsDTRef.ajax.reload()});jobsDT.on("draw.dt",function(){$(".download-icon").click(function(){var a=$(this).parent().parent().attr("id");download(a)});$(".cTooltip").hasClass("tooltipstered")||$(".cTooltip").tooltipster({animation:"grow",theme:"tooltipster-punk",arrow:!0})})});
function download(c){$.post("data/parts/backend_request.php",{reqcode:17,args:JSON.stringify({file_id:c})}).done(function(b){alert("hash received = "+b.toString());window.open("./download.php?down="+b.toString(),"_blank").focus();jobsDTRef.ajax.reload()})}function htmlEncodeStr(c){return c.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&lsquo;")};
